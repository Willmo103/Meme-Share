<!DOCTYPE html>
<html lang="en">
{% include 'head.html' %}

<body class="dark:bg-black bg-white text-gray-900 dark:text-gray-100">
    <div class="flex flex-row">
        <!-- Left Sidebar (Navbar) -->
        <nav class="fixed top-0 left-0 bg-white dark:bg-black p-2 h-full w-20 sm:w-20 md:w-20 lg:w-20 xl:w-60 border border-r-2 border-gray-800  overflow-auto box-border ps-3 pt-2  "
            style="max-width: 256px;">
            <!-- Your navbar code here -->
            <div class="container flex flex-col leading-5">
                <div
                    class="block flex-shrink-0 w-full justify-start text-black dark:text-white mt-4 mb-7 lg:mt-6 md:mt-6 sm:mt-6 lg:mb-9 md:mb-9 sm:mb-9 items-start relative">

                    <a class="hidden items-center text-black dark:text-white no-underline hover:text-gray-600 hover:no-underline md:hidden sm:hidden xl:block lg:hidden mt-2 px-3"
                        href="{{ url_for('routes.index_page') }}">
                        <span class="text-4xl font-billabong font-light">Intragram</span>
                    </a>
                    <a class="block items-center flex-shrink-0 text-gray-600 dark:text-white no-underline hover:text-white hover:no-underline xl:hidden lg:block md:block sm:block mt-2 px-3 relative"
                        href="{{ url_for('routes.index_page') }}">
                        <span class="hidden dark:block flex-shrink-0">
                            <img src="{{ url_for('static', filename='images/intragram_logo_darkmode.png') }}"
                                class="w-6 h-6" style="width: 24px; height: 24px;" alt="Logo">
                        </span>
                        <span class="block dark:hidden">
                            <img src="{{ url_for('static', filename='images/intragram_logo_lightmode.png') }}"
                                class="w-6 h-6" style="width: 24px; height: 24px;" alt="Logo">
                        </span>
                    </a>

                </div>
                <!-- Check if user is authenticated -->
                {% if current_user.is_authenticated %}

                <div class="block mb-1">
                    <div class="block relative">
                        <div class="block relative">
                            <a href="" class="inline p-0 m-0"></a>
                            <div
                                class="my-1 p-3 w-full lg:w-12 md:w-12 sm:w-12 flex-row items-center inline-flex rounded-lg hover:bg-gray-200 hover:cursor-pointer dark:hover:bg-gray-900">
                                <div class="block">
                                    <div class="overflow-y-visible content-stretch rounded-none w-5 ">
                                        <i class="fas fa-home fa-lg text-gray-600 dark:text-white"></i>
                                    </div>
                                </div>
                                <div class="flex h-6 w-fit items-center overflow-x-hidden ps-4">
                                    <div class="w-full">
                                        <div class="w-full">
                                            <span
                                                class="overflow-y-visible text-base m-0 break-words overflow-x-visible whitespace-pre-line max-w-full"></span>
                                            <span
                                                class="whitespace-nowrap text-ellipsis overflow-hidden max-w-full hidden sm:hidden md:hidden lg:hidden xl:block">Home</span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="block mb-1">
                    <div class="block relative">
                        <div class="block relative">
                            <a href="#" class="inline p-0 m-0"></a>
                            <div
                                class="my-1 p-3 w-full lg:w-12 md:w-12 sm:w-12 flex-row items-center inline-flex rounded-lg hover:bg-gray-200 hover:cursor-pointer dark:hover:bg-gray-900">
                                <div class="block">
                                    <div class="overflow-y-visible content-stretch rounded-none w-5 ">
                                        <i
                                            class="fa-solid fa-magnifying-glass fa-lg text-gray-600 dark:text-white "></i>
                                    </div>
                                </div>
                                <div class="flex h-6 w-fit items-center overflow-x-hidden ps-4">
                                    <div class="w-full">
                                        <div class="w-full">
                                            <span
                                                class="overflow-y-visible text-base m-0 break-words overflow-x-visible whitespace-pre-line max-w-full"></span>
                                            <span
                                                class="whitespace-nowrap text-ellipsis overflow-hidden hidden max-w-full sm:hidden md:hidden lg:hidden xl:block">Search</span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="block mb-1">
                    <div class="block relative">
                        <div class="block relative">
                            <a href="#" class="inline p-0 m-0"></a>
                            <div
                                class="my-1 p-3 w-full lg:w-12 md:w-12 sm:w-12 flex-row items-center inline-flex rounded-lg hover:bg-gray-200 hover:cursor-pointer dark:hover:bg-gray-900">
                                <div class="block">
                                    <div class="overflow-y-visible content-stretch rounded-none w-5 ">
                                        <i class="fa-regular fa-compass fa-lg text-gray-600 dark:text-white "></i>
                                    </div>
                                </div>
                                <div class="flex h-6 w-fit items-center overflow-x-hidden ps-4">
                                    <div class="w-full">
                                        <div class="w-full">
                                            <span
                                                class="overflow-y-visible text-base m-0 break-words overflow-x-visible whitespace-pre-line max-w-full"></span>
                                            <span
                                                class="whitespace-nowrap text-ellipsis overflow-hidden hidden max-w-full sm:hidden md:hidden lg:hidden xl:block">Discover</span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Search ? -->
                <div class="block mb-1">
                    <div class="block relative">
                        <div class="block relative">
                            <a href="" class="inline p-0 m-0"></a>
                            <div
                                class="my-1 p-3 w-full lg:w-12 md:w-12 sm:w-12 flex-row items-center inline-flex rounded-lg hover:bg-gray-200 hover:cursor-pointer dark:hover:bg-gray-900">
                                <div class="block">
                                    <div class="overflow-y-visible content-stretch rounded-none w-5 ">
                                        <i class="far fa-bookmark fa-lg text-gray-600 dark:text-white "></i>
                                    </div>
                                </div>
                                <div class="flex h-6 w-fit items-center overflow-x-hidden ps-4">
                                    <div class="w-full">
                                        <div class="w-full">
                                            <span
                                                class="overflow-y-visible text-base m-0 break-words overflow-x-visible whitespace-pre-line max-w-full"></span>
                                            <span
                                                class="whitespace-nowrap text-ellipsis overflow-hidden hidden max-w-full sm:hidden md:hidden lg:hidden xl:block">Collections</span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="block mb-1">
                    <div class="block relative">
                        <div class="block relative">
                            <a href="{{ url_for('routes.logout') }}" class="inline p-0 m-0"></a>
                            <div
                                class="my-1 p-3 w-full lg:w-12 md:w-12 sm:w-12 flex-row items-center inline-flex rounded-lg hover:bg-gray-200 hover:cursor-pointer dark:hover:bg-gray-900">
                                <div class="block">
                                    <div class="overflow-y-visible content-stretch rounded-none w-5 ">
                                        <i
                                            class="fa-solid fa-right-from-bracket fa-lg text-gray-600 dark:text-white "></i>
                                    </div>
                                </div>
                                <div class="flex h-6 w-fit items-center overflow-x-hidden ps-4">
                                    <div class="w-full">
                                        <div class="w-full">
                                            <span
                                                class="overflow-y-visible text-base m-0 break-words overflow-x-visible whitespace-pre-line max-w-full"></span>
                                            <span
                                                class="whitespace-nowrap text-ellipsis overflow-hidden hidden max-w-full sm:hidden md:hidden lg:hidden xl:block">Logout</span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="block mb-1">
                    <div class="block relative">
                        <div class="block relative">
                            <div class="my-1 p-3 w-full flex-row lg:w-12 md:w-12 sm:w-12 items-center inline-flex rounded-lg hover:bg-gray-200 hover:cursor-pointer dark:hover:bg-gray-900"
                                id="upload">
                                <div class="block">
                                    <div class="overflow-y-visible content-stretch rounded-none w-5 ">
                                        <i
                                            class="fa-solid fa-arrow-up-from-bracket fa-lg text-gray-600 dark:text-white "></i>
                                    </div>
                                </div>
                                <div class="flex h-6 w-fit items-center overflow-x-hidden ps-4">
                                    <div class="w-full">
                                        <div class="w-full">
                                            <span
                                                class="overflow-y-visible text-base m-0 break-words overflow-x-visible whitespace-pre-line max-w-full"></span>
                                            <span
                                                class="whitespace-nowrap text-ellipsis overflow-hidden hidden max-w-full sm:hidden md:hidden lg:hidden xl:block">Upload</span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
        </nav>
        <div class="top-0 left-0 bg-white dark:bg-black p-2 h-full sm:w-20 md:20 lg:w-20 w-20 xl:w-80 overflow-auto">
        </div>
        <div class="flex-col flex w-full overflow-auto">
            <!-- Main Content -->
            {% block content %}{% endblock %}
        </div>
    </div>
    <!-- full screen modal -->
    <div class="hidden w-full h-full fixed z-50 top-0 left-0 overflow-hidden bg-black bg-opacity-60"
        id="full_screen_modal">
        <div class="w-full h-full flex flex-col justify-center items-center">
            <div class="bg-white dark:bg-black rounded-lg shadow-lg max-w-fit">
                <div class="flex justify-between items-center border-b-2 border-gray-300 dark:border-gray-600 p-2">
                    <button class="text-2xl font-semibold" id="close_full_screen_modal">&times;</button>
                </div>
                <div class="p-2" id="modalContent">
                </div>
            </div>
        </div>
    </div>
    <script>
        var modal = document.getElementById("full_screen_modal");

        window.addEventListener("scroll", function (event) {
            if (!modal.classList.contains("hidden")) {
                window.scrollTo(0, 0);
            }
        });

        // Get the button that opens the modal
        var uploadBtn = document.getElementById("upload");

        // Get the <span> element that closes the modal
        var span = document.getElementById("close_full_screen_modal");

        var modalContent = document.getElementById("modalContent");

        // When the user clicks the button, open the modal
        uploadBtn.onclick = function () {
            modalContent.innerHTML = `{% include 'upload_meme.html' %}`;
            modal.classList.remove("hidden");
            while (modal.classList.contains("hidden")) {
                window.scrollTo(0, 0);
            }
        };

        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
            modal.classList.add("hidden");
            modalContent.innerHTML = "";
        };

    </script>
</body>

</html>
